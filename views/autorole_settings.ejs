<%- include('header', { user: user, guild: guild, activePage: 'autorole' }) %>

<div class="main-content">
    <h1>Configurações de AutoRole de <%= guild.name %></h1>
    
    <% if (message === 'success') { %>
        <div class="alert alert-success">
            ✅ Configurações de AutoRole salvas com sucesso!
        </div>
    <% } %>

    <form method="POST">
        <div class="settings-section">
            <h2>Controle de AutoRole</h2>
            <label class="checkbox-container">
                <input type="checkbox" name="enabled" value="1" <%= settings.enabled ? 'checked' : '' %>>
                Ativar AutoRole
            </label>
        </div>
        
        <div class="settings-section">
            <h2>Cargos que serão dados</h2>
            <p>Selecione todos os cargos que deseja atribuir automaticamente a novos membros. Segure **Ctrl** ou **Cmd** para selecionar múltiplos.</p>
            
            <label for="roles-select">Cargos:</label>
            <select name="roles" id="roles-select" multiple size="8">
                <% availableRoles.forEach(role => { %>
                    <option value="<%= role.id %>" <%= settings.roles.includes(role.id) ? 'selected' : '' %>
                            style="color: <%= role.color === '#000000' ? '#ccc' : role.color %>;">
                        <%= role.name %>
                    </option>
                <% }); %>
            </select>
            <small>
                Atenção: O Bot deve ter um cargo **superior** aos cargos selecionados para poder atribuí-los. 
                Cargos que o bot não pode gerenciar não aparecem aqui.
            </small>
        </div>

        <button type="submit" class="btn btn-primary btn-save-large">Salvar Configurações</button>
    </form>
</div>

<%- include('footer') %>