<!DOCTYPE html>
<html>
<head>
    <title>Configurar <%= guild.name %></title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #2c2f33; color: #ffffff; padding: 20px; }
        .header { background-color: #7289da; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
        .container { background-color: #23272a; padding: 20px; border-radius: 8px; }
        .menu a { color: #ffffff; margin-right: 15px; text-decoration: none; }
        h1, h2 { color: #ffffff; }
        .config-section { background-color: #36393f; padding: 15px; border-radius: 5px; margin-top: 15px; }
        select, button { padding: 10px; margin-top: 10px; border-radius: 5px; border: none; }
        button { background-color: #7289da; color: white; cursor: pointer; }
        .current-role { font-weight: bold; color: #2ecc71; }
        .alert { padding: 10px; margin-top: 10px; border-radius: 5px; background-color: #e74c3c; display: none; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Configura√ß√£o: <%= guild.name %></h1>
        <div class="menu">
            <a href="/dashboard">‚Üê Voltar para Servidores</a>
            <a href="/logout">Logout</a>
        </div>
    </div>

    <div class="container">
        <h2>üõ†Ô∏è Auto-Role (Cargo Autom√°tico)</h2>
        
        <div class="config-section">
            <p>
                Cargo atual: 
                <% if (currentAutoroleId) { %>
                    <span class="current-role">@<%= guild.roles.cache.get(currentAutoroleId).name %></span>
                <% } else { %>
                    Nenhum (Desativado)
                <% } %>
            </p>
            
            <form id="autorole-form">
                <label for="autorole-select">Selecione o cargo que novos membros receber√£o:</label><br>
                <select id="autorole-select" name="roleId">
                    <option value="none">-- DESATIVAR Auto-Role --</option>
                    <% roles.forEach(role => { %>
                        <option value="<%= role.id %>" <%= role.id === currentAutoroleId ? 'selected' : '' %>>
                            <%= role.name %>
                        </option>
                    <% }); %>
                </select>
                <button type="submit">Salvar Configura√ß√£o</button>
            </form>
            
            <div id="status-message" class="alert"></div>
        </div>
    </div>
    
    <script>
        document.getElementById('autorole-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const form = e.target;
            const roleId = form.elements.roleId.value;
            const guildId = '<%= guild.id %>';
            const statusDiv = document.getElementById('status-message');
            
            statusDiv.style.display = 'none';
            
            // Aqui, o fetch enviaria a configura√ß√£o para uma nova rota POST (a ser criada)
            // Por enquanto, vamos simular o envio.
            
            statusDiv.style.backgroundColor = '#2ecc71';
            statusDiv.innerHTML = `Configura√ß√£o salva! Novo cargo ID: **${roleId}**. (Falta criar a rota de salvamento no index.js!)`;
            statusDiv.style.display = 'block';

            // ATEN√á√ÉO: A ROTA DE SALVAMENTO (POST) AINDA N√ÉO EXISTE!
        });
    </script>
</body>
</html>